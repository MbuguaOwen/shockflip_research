# ShockFlip v1.4 – BTC research spec (BLUEPRINT)

data:
  include: data.yaml

slippage_bp: 0.5
fees:
  taker_bp: 1.0

risk:
  atr_window: 60
  cooldown_bars: 10
  long:
    tp_mult: 27.5
    sl_mult: 9.0
  short:
    tp_mult: 15.0
    sl_mult: 6.5

management:
  # H5/H7 – Breakeven stop (Zombie Killer)
  # 0.0 disables; 1.0R recommended starting point
  be_at_r: 1.0

shock_flip:
  source: "imbalance"
  z_window: 240
  # v1.3 detector baseline
  z_band: 2.0
  jump_band: 2.0
  persistence_bars: 3
  persistence_ratio: 0.60
  dynamic_thresholds:
    enabled: false
    percentile: 0.99
  location_filter:
    donchian_window: 120
    require_extreme: true

filters:
  atr_percentile:
    enabled: false
    window: 5000
    low: 0.30
    high: 0.80
  macro_regime:
    enabled: false
  # H1 (promoted): engine reads filters.prior_flow_sign
  prior_flow_sign:
    enabled: true
    required_sign: -1
  # H2 (candidate): analysis suggests excluding this "dead zone"
  h2_div_dead_zone:
    enabled: true
    min: -0.0741
    max: 0.26

session:
  utc_blocks: [[0, 24]]

event_study:
  horizons:
    long:  [12, 18, 60]
    short: [6, 12]
  baseline_n_random: 2000

